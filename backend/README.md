# سیستم ERP یراق‌آلات ناصری

سیستم مدیریت منابع سازمانی (ERP) پیشرفته برای فروشگاه یراق‌آلات ناصری با رابط کاربری مدرن و واکنش‌گرا.

## معرفی پروژه
این پروژه یک سیستم مدیریت یکپارچه است که برای فروشگاه‌های یراق‌آلات و سخت‌افزار طراحی شده است. این سیستم شامل بخش‌های متعددی از جمله مدیریت محصولات، موجودی، فروش، خرید و حسابداری می‌باشد.

ویژگی‌های اصلی:
- **بک‌اند**: Django + Django REST Framework با معماری RESTful
- **فرانت‌اند**: Vue.js 3 + Tailwind CSS + Headless UI (ساختار جدید، بدون Materio/Vuetify)
- **سیستم کنترل دسترسی**: محدودیت دسترسی بر اساس نقش کاربران (RBAC)
- **احراز هویت امن**: سیستم توکن‌محور برای احراز هویت کاربران
- **رابط کاربری RTL**: بهینه‌سازی شده برای زبان فارسی
- **واکنش‌گرایی کامل**: سازگار با تمامی دستگاه‌ها از موبایل تا دسکتاپ
- **داشبورد جامع**: نمایش خلاصه‌ای از وضعیت فروش، موجودی و مشتریان
- **مدیریت فروش پیشرفته**: فاکتورسازی، پیگیری پرداخت‌ها و گزارش‌گیری
- **API مستندسازی شده**: امکان توسعه و اتصال به سایر سیستم‌ها

## نیازمندی‌ها
### بک‌اند
- Python 3.8 یا بالاتر
- Django 5.0.7 یا بالاتر
- Django REST Framework 3.16.0 یا بالاتر
- سایر پکیج‌های مورد نیاز در فایل requirements.txt

### فرانت‌اند
- Node.js 16.0 یا بالاتر
- npm 8.0.0 یا بالاتر

## راه‌اندازی بک‌اند
1. ایجاد محیط مجازی:
   ```
   python -m venv venv
   ```
2. فعال‌سازی محیط مجازی:
   - ویندوز (CMD):
     ```
     venv\Scripts\activate
     ```
   - ویندوز (PowerShell):
     ```
     .\venv\Scripts\Activate.ps1
     ```
   - لینوکس/مک:
     ```
     source venv/bin/activate
     ```
3. نصب پکیج‌های مورد نیاز:
   ```
   pip install -r requirements.txt
   ```
4. اجرای مایگریشن‌ها:
   ```
   python manage.py migrate
   ```
5. ایجاد کاربر ادمین (اختیاری):
   ```
   python manage.py createsuperuser
   ```
6. اجرای سرور:
   ```
   python manage.py runserver
   ```

## راه‌اندازی فرانت‌اند
1. ورود به پوشه frontend:
   ```
   cd frontend
   ```
2. نصب وابستگی‌ها:
   ```
   npm install
   ```
3. اجرای سرور توسعه:
   ```
   npm run dev
   ```
4. ساخت نسخه تولید:
   ```
   npm run build
   ```

## تنظیم ارتباط فرانت‌اند با بک‌اند
در فایل `.env` داخل پوشه frontend مقدار زیر را قرار دهید:
```
VITE_API_URL=http://localhost:8000
```

## کاربران پیش‌فرض
- **ادمین**:
  - شماره تلفن: 09122173180
  - رمز عبور: Admin@123
- **مدیر**:
  - شماره تلفن: 09123456788
  - رمز عبور: Manager@123

## ماژول‌های سیستم
- **کاربران**: مدیریت کاربران و احراز هویت
- **محصولات**: مدیریت محصولات و دسته‌بندی‌ها
- **موجودی**: مدیریت موجودی و انبار
- **فروش**: مدیریت فروش، مشتریان، فاکتورها و پرداخت‌ها
- **خرید**: مدیریت خرید و تامین‌کنندگان
- **حسابداری**: مدیریت حسابداری و مالی
- **داشبورد**: نمایش خلاصه‌ای از وضعیت کسب و کار

## مستندات API
برای دسترسی به مستندات API، پس از اجرای سرور، به آدرس‌های زیر مراجعه کنید:
- **Swagger UI**: `http://127.0.0.1:8000/swagger/`
- **ReDoc**: `http://127.0.0.1:8000/redoc/`
- **OpenAPI JSON**: `http://127.0.0.1:8000/swagger.json/`
- **OpenAPI YAML**: `http://127.0.0.1:8000/swagger.yaml/`

## سناریوی تست End-to-End
این پروژه دارای تست جامع end-to-end است که چرخه کامل عملیات (خرید، فروش، انبار، حسابداری، حذف منطقی و...) را پوشش می‌دهد. برای مشاهده سناریو و اجرای تست:
- فایل `users/tests_e2e.py` را ببینید.
- اجرای تست:
  ```
  python manage.py test users.tests_e2e
  ```

## نکات عیب‌یابی متداول
- اگر در PowerShell با خطای `&&` مواجه شدید، دستورات را جداگانه اجرا کنید.
- اگر با خطای Multiple Root Templates در Vue مواجه شدید، مطمئن شوید هر فایل Vue فقط یک المنت ریشه دارد.
- برای ارتباط صحیح فرانت‌اند با بک‌اند، مقدار VITE_API_URL را در .env تنظیم کنید.

## تنظیمات منطقه‌ای
- **زبان پیش‌فرض**: فارسی
- **منطقه زمانی**: تهران (Asia/Tehran)
- **فرمت تاریخ**: تاریخ شمسی (jYYYY/jMM/jDD)
- **فونت پیش‌فرض**: وزیر
- **جهت طراحی**: راست به چپ (RTL)

## مجوز استفاده
این پروژه تحت مجوز MIT منتشر شده است.

---

### نکات تکمیلی توسعه و تست
- حذف منطقی (soft delete) برای کاربران و محصولات فعال است.
- فیلدهای تاریخچه (audit log) برای ردیابی تغییرات در مدل‌های کلیدی استفاده می‌شود.
- تست‌های واحد و API برای همه ماژول‌ها نوشته شده است.
- تست end-to-end چرخه کامل ERP را پوشش می‌دهد.
- ساختار پروژه به صورت backend و frontend کاملاً جداگانه است.
- برای توسعه frontend از Vue 3 + Tailwind CSS + Headless UI استفاده می‌شود (نه Materio/Vuetify).
